==================
组件调试
==================

在 Canvas Mind 平台中，组件调试是开发过程中不可或缺的一环。为了帮助开发者快速验证代码逻辑、排查运行时错误，平台提供了一套强大的调试工具，支持在 **IPython Console 中直接运行当前编辑的组件代码**，并结合 **实时变量浏览器** 进行深度分析。

组件调试模式示意图
------------------

.. image:: ../_images/组件调试模式示意图.gif
   :alt: 组件调试模式动态演示
   :width: 100%

如图所示，组件调试功能集成在组件开发面板的右侧边栏中。当您点击“运行”按钮或手动切换到“多终端调试面板”时，系统会自动将当前编辑的组件代码加载到 IPython 内核中，并为您打开一个交互式控制台。

核心功能
--------

### 1. 在 IPython Console 中运行组件代码

*   **一键运行**：在组件开发界面顶部，点击 **▶️ “运行”** 按钮，即可将当前编辑器中的完整组件代码发送至后台 IPython 内核执行。
*   **环境隔离**：每次运行都在独立的沙箱环境中进行，不会影响其他组件或画布的正常运行。
*   **即时反馈**：控制台会实时输出代码的 `print` 语句、日志信息（`self.logger.info()`）以及任何异常堆栈，让您一目了然地看到程序执行的全过程。

### 2. 实时变量浏览器 (Variable Explorer)

*   **动态监控**：在代码执行过程中，右侧的“变量浏览器”会实时列出当前作用域内所有可用的变量及其值。
*   **结构化展示**：对于复杂的对象（如字典、列表、自定义类实例），变量浏览器会以树状结构展开，方便您层层深入查看其内部数据。
*   **类型与大小提示**：每个变量旁边都会显示其数据类型和内存占用大小，帮助您快速识别潜在的性能瓶颈或数据结构问题。
*   **交互式操作**：您可以直接在变量浏览器中双击某个变量，将其内容复制到剪贴板，或者在控制台中直接引用该变量进行进一步的计算或调试。

**操作指南：**

1.  在组件开发界面，确保您的代码已经编写完成。
2.  点击顶部工具栏的 **▶️ “运行”** 按钮，或手动切换到右侧边栏的 **“多终端调试面板”**。
3.  在控制台中，您可以看到代码的执行结果和日志输出。
4.  同时，在“变量浏览器”中，观察代码运行后产生的变量变化。